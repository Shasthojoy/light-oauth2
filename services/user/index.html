<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>User Management - Light OAuth2 - OAuth2 Serivces based on light-4j</title>
    <meta name="generator" content="Hugo 0.20.6" />

    
    <meta name="description" content="Light OAuth2 Docs">
    
    <link rel="canonical" href="https://networknt.github.io/light-oauth2/services/user/">
    
    <meta name="author" content="Steve Hu">
    

    <meta property="og:url" content="https://networknt.github.io/light-oauth2/services/user/">
    <meta property="og:title" content="Light OAuth2 - OAuth2 Serivces based on light-4j">
    <meta property="og:image" content="https://networknt.github.io/light-oauth2/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Light OAuth2 - OAuth2 Serivces based on light-4j">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://networknt.github.io/light-oauth2/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://networknt.github.io/light-oauth2/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://networknt.github.io/light-oauth2/fonts/icon.eot');
        src: url('https://networknt.github.io/light-oauth2/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://networknt.github.io/light-oauth2/fonts/icon.woff')
               format('woff'),
             url('https://networknt.github.io/light-oauth2/fonts/icon.ttf')
               format('truetype'),
             url('https://networknt.github.io/light-oauth2/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://networknt.github.io/light-oauth2/stylesheets/application.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-oauth2/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-oauth2/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-oauth2/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://networknt.github.io/light-oauth2/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-red palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        User Management
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/stevehu" title="@stevehu on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/networknt/light-oauth2" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://networknt.github.io/light-oauth2/images/logo.png">
        </div>
      
      <div class="name">
        <strong>Light OAuth2 - OAuth2 Serivces based on light-4j <span class="version">1.4.3</span></strong>
        
          <br>
          networknt/light-oauth2
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/networknt/light-oauth2/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/networknt/light-oauth2/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Getting started" href="https://networknt.github.io/light-oauth2/getting-started/">
	
	Getting started
</a>



  
</li>



<li>
  
    



<a  title="Architecture" href="https://networknt.github.io/light-oauth2/architecture/">
	
	Architecture
</a>



  
</li>



<li>
  
    



<a  title="Services" href="https://networknt.github.io/light-oauth2/services/">
	
	Services
</a>



  
</li>



<li>
  
    



<a  title="Tutorials" href="https://networknt.github.io/light-oauth2/tutorials/">
	
	Tutorials
</a>



  
</li>



<li>
  
    



<a  title="Examples" href="https://networknt.github.io/light-oauth2/example/">
	
	Examples
</a>



  
</li>



<li>
  
    



<a  title="Tools" href="https://networknt.github.io/light-oauth2/tools/">
	
	Tools
</a>



  
</li>



<li>
  
    



<a  title="References" href="https://networknt.github.io/light-oauth2/reference/">
	
	References
</a>



  
</li>



<li>
  
    



<a  title="Issues &amp; Help" href="https://github.com/networknt/light-oauth2/issues">
	
	Issues &amp; Help
</a>



  
</li>



<li>
  
    



<a  title="Roadmap" href="https://networknt.github.io/light-oauth2/roadmap/">
	
	Roadmap
</a>



  
</li>



<li>
  
    



<a  title="License" href="https://www.apache.org/licenses/LICENSE-2.0">
	
	License
</a>



  
</li>



<li>
  
    



<a  title="Introduction" href="https://networknt.github.io/light-oauth2/index.html">
	
	Introduction
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/stevehu" target="_blank" title="@stevehu on GitHub">
              @stevehu on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:stevehu@gmail.com" title="Email of stevehu@gmail.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>User Management </h1>

			

<h1 id="user">User</h1>

<p>This is a service for user registration and management. The OAuth server supports
integration with other user management system like active directory or LDAP.
However, for most enterprise customers, their customer information normally will
be in database. This service provides a database table for user management and
several endpoints to manage users.</p>

<p>In OAuth 2.0 specification, user is normally called resource owner.</p>

<h2 id="user-type">User Type</h2>

<p>Currently there are three user types to support.</p>

<ul>
<li>customer</li>
<li>partner</li>
<li>employee</li>
</ul>

<h2 id="user-id">User Id</h2>

<p>User id must be unique within the system.</p>

<h2 id="password">Password</h2>

<p>Password is provided when registering and it is hashed and salted in persistence
layer.</p>

<h2 id="user-micro-service">User Micro Service</h2>

<p>This service has several endpoints and listening to port 6885.</p>

<p>Here is the specification.</p>

<pre><code>swagger: '2.0'

info:
  version: &quot;1.0.0&quot;
  title: OAuth2 User Service
  description: OAuth2 User Service microservices endpoints. 
  contact:
    email: stevehu@gmail.com
  license:
    name: &quot;Apache 2.0&quot;
    url: &quot;http://www.apache.org/licenses/LICENSE-2.0.html&quot;
host: oauth2.networknt.com
schemes:
  - http
  - https

consumes:
  - application/json
produces:
  - application/json

paths:
  /oauth2/user:
    get:
      description: Return all users
      operationId: getAllUsers
      parameters:
      - name: &quot;page&quot;
        in: &quot;query&quot;
        description: &quot;Page number&quot;
        required: true
        type: &quot;integer&quot;
        format: &quot;int32&quot;
      - name: &quot;pageSize&quot;
        in: &quot;query&quot;
        description: &quot;Pag size&quot;
        required: false
        type: &quot;integer&quot;
        format: &quot;int32&quot;
      - name: &quot;userId&quot;
        in: &quot;query&quot;
        description: &quot;Partial userId for filter&quot;
        required: false
        type: &quot;string&quot;
      responses:
        200:
          description: &quot;successful operation&quot;
          schema:
            type: &quot;array&quot;
            items:
              $ref: &quot;#/definitions/User&quot;
      security:
      - user_auth:
        - &quot;oauth.user.r&quot;
    post:
      description: Return a user object
      operationId: createUser
      parameters:
      - in: &quot;body&quot;
        name: &quot;body&quot;
        description: &quot;User object that needs to be added&quot;
        required: true
        schema:
          $ref: &quot;#/definitions/User&quot;      
      responses:
        200:
          description: Successful response
      security:
      - user_auth:
        - &quot;oauth.user.w&quot;
    put:
      description: Return the updated user
      operationId: updateUser
      parameters:
      - in: &quot;body&quot;
        name: &quot;body&quot;
        description: &quot;User object that needs to be added&quot;
        required: true
        schema:
          $ref: &quot;#/definitions/User&quot;      
      responses:
        200:
          description: Successful response
      security:
      - user_auth:
        - &quot;oauth.user.w&quot;
          
  /oauth2/user/{userId}:
    delete:
      description: Delete a user by Id
      operationId: deleteUser
      parameters:
      - name: &quot;userId&quot;
        in: &quot;path&quot;
        description: &quot;User Id&quot;
        required: true
        type: &quot;string&quot;
      responses:
        400:
          description: &quot;Invalid userId supplied&quot;
        404:
          description: &quot;User not found&quot;
      security:
        - user_auth:
          - oauth.user.w
    get:
      description: Get a user by Id
      operationId: getUser
      parameters:
      - name: &quot;userId&quot;
        in: &quot;path&quot;
        description: &quot;User Id&quot;
        required: true
        type: &quot;string&quot;
      responses:
        200: 
          description: Successful response
          schema:
            $ref: &quot;#/definitions/User&quot;          
        400:
          description: &quot;Invalid userId supplied&quot;
        404:
          description: &quot;User not found&quot;
      security:
        - user_auth:
          - oauth.user.r
          - oauth.user.w
  /oauth2/password/{userId}:
    post:
      description: Reset Password
      operationId: resetPassword
      parameters:
      - in: &quot;body&quot;
        name: &quot;body&quot;
        description: &quot;Password object that needs to be added&quot;
        required: true
        schema:
          $ref: &quot;#/definitions/Password&quot;      
      - name: &quot;userId&quot;
        in: &quot;path&quot;
        description: &quot;User Id&quot;
        required: true
        type: &quot;string&quot;
      responses:
        404:
          description: &quot;User not found&quot;
      security:
      - user_auth:
        - &quot;oauth.user.w&quot;
          
securityDefinitions:
  user_auth:
    type: &quot;oauth2&quot;
    authorizationUrl: &quot;http://localhost:8888/oauth2/code&quot;
    flow: &quot;implicit&quot;
    scopes:
      oauth.user.w: &quot;write user&quot;
      oauth.user.r: &quot;read user&quot;
definitions:
  User:
    type: &quot;object&quot;
    required:
    - &quot;userId&quot;
    - &quot;userType&quot;
    - &quot;firstName&quot;
    - &quot;lastName&quot;
    - &quot;email&quot;
    properties:
      userId:
        type: &quot;string&quot;
        description: &quot;a unique id&quot;
      userType:
        type: &quot;string&quot;
        description: &quot;user type&quot;
        enum:
        - &quot;admin&quot;
        - &quot;employee&quot;
        - &quot;customer&quot;
        - &quot;partner&quot;
      firstName:
        type: &quot;string&quot;
        description: &quot;first name&quot;
      lastName:
        type: &quot;string&quot;
        description: &quot;last name&quot;
      email:
        type: &quot;string&quot;
        description: &quot;email address&quot;
      password:
        type: &quot;string&quot;
        format: &quot;password&quot;
        description: &quot;password&quot;
      passwordConfirm:
        type: &quot;string&quot;
        format: &quot;password&quot;
        description: &quot;password confirm&quot;
      createDt:
        type: &quot;string&quot;
        format: &quot;date-time&quot;
        description: &quot;create date time&quot;
      updateDt:
        type: &quot;string&quot;
        format: &quot;date-time&quot;
        description: &quot;update date time&quot;
  Password:
    type: &quot;object&quot;
    required:
    - &quot;password&quot;
    - &quot;newPassword&quot;
    - &quot;newPasswordConfirm&quot;
    properties:
      password:
        type: &quot;string&quot;
        format: &quot;password&quot;
        description: &quot;existing password&quot;
      newPassword:
        type: &quot;string&quot;
        format: &quot;password&quot;
        description: &quot;new password&quot;
      newPasswordConfirm:
        type: &quot;string&quot;
        format: &quot;password&quot;
        description: &quot;new password confirm&quot;

</code></pre>

<h2 id="oauth2-password-userid-post">/oauth2/password/{userId}@post</h2>

<p>This endpoint is used to reset user password. The user has to provide existing password,
the new password and password confirmation in order to reset it.</p>

<p>There are several validations need to be performed before the password can be reset.</p>

<ul>
<li>If userId cannot be found in the user cache, then the following error will be returned.</li>
</ul>

<pre><code>  &quot;ERR12013&quot;: {
    &quot;statusCode&quot;: 404,
    &quot;code&quot;: &quot;ERR12013&quot;,
    &quot;message&quot;: &quot;USER_NOT_FOUND&quot;,
    &quot;description&quot;: &quot;User %s is not found.&quot;
  }
</code></pre>

<ul>
<li>If password is not matched the cached password, then the following error will be returned.</li>
</ul>

<pre><code>  &quot;ERR12016&quot;: {
    &quot;statusCode&quot;: 401,
    &quot;code&quot;: &quot;ERR12016&quot;,
    &quot;message&quot;: &quot;INCORRECT_PASSWORD&quot;,
    &quot;description&quot;: &quot;Incorrect password.&quot;
  }
</code></pre>

<ul>
<li>If new password and password confirmation are not matched, then the following error
will be returned.</li>
</ul>

<pre><code>  &quot;ERR12012&quot;: {
    &quot;statusCode&quot;: 400,
    &quot;code&quot;: &quot;ERR12012&quot;,
    &quot;message&quot;: &quot;PASSWORD_PASSWORDCONFIRM_NOT_MATCH&quot;,
    &quot;description&quot;: &quot;Password %s and PasswordConfirm %s are not matched.&quot;
  }
</code></pre>

<h2 id="oauth2-user-get">/oauth2/user@get</h2>

<p>This endpoint gets all the users from user service with filter and sorted on
userId. A page query parameter is mandatory. pageSize and userId filter
are optional.</p>

<ul>
<li>page</li>
</ul>

<p>Page number which must be specified. It starts with 1 and an empty list will
be returned if the page is greater than the last page.</p>

<ul>
<li>pageSize</li>
</ul>

<p>Default pageSize is 10 and you can overwrite it with another number. Please don&rsquo;t
use a big number due to performance reason.</p>

<ul>
<li>userId</li>
</ul>

<p>This is the only filter available and it supports filter by start with a few characters.
For example, &ldquo;userId=abc&rdquo; means any userId starts with &ldquo;abc&rdquo;. The result is also
sorted by userId in the pagination.</p>

<p>The following validation will be performed in the service.</p>

<ul>
<li>If page is missing from the query parameter, an error will be returned.</li>
</ul>

<pre><code>  &quot;ERR11000&quot;: {
    &quot;statusCode&quot;: 400,
    &quot;code&quot;: &quot;ERR11000&quot;,
    &quot;message&quot;: &quot;VALIDATOR_REQUEST_PARAMETER_QUERY_MISSING&quot;,
    &quot;description&quot;: &quot;Query parameter '%s' is required on path '%s' but not found in request.&quot;
  }
</code></pre>

<h2 id="oauth2-user-post">/oauth2/user@post</h2>

<p>This endpoint is used to create a new user. The following validations will be performed
before a new user will be added.</p>

<ul>
<li>If the userId exists in the system, then the following error will be returned.</li>
</ul>

<pre><code>  &quot;ERR12020&quot;: {
    &quot;statusCode&quot;: 400,
    &quot;code&quot;: &quot;ERR12020&quot;,
    &quot;message&quot;: &quot;USER_ID_EXISTS&quot;,
    &quot;description&quot;: &quot;User id %s exists.&quot;
  }
</code></pre>

<ul>
<li>If the email exists in the system, then the following error will be returned.</li>
</ul>

<pre><code>  &quot;ERR12021&quot;: {
    &quot;statusCode&quot;: 400,
    &quot;code&quot;: &quot;ERR12021&quot;,
    &quot;message&quot;: &quot;EMAIL_EXISTS&quot;,
    &quot;description&quot;: &quot;Email %s exists.&quot;
  }
</code></pre>

<ul>
<li>If new password and password confirmation are not matched, the following error
will be returned.</li>
</ul>

<pre><code>  &quot;ERR12012&quot;: {
    &quot;statusCode&quot;: 400,
    &quot;code&quot;: &quot;ERR12012&quot;,
    &quot;message&quot;: &quot;PASSWORD_PASSWORDCONFIRM_NOT_MATCH&quot;,
    &quot;description&quot;: &quot;Password %s and PasswordConfirm %s are not matched.&quot;
  }
</code></pre>

<ul>
<li>If password or password confirmation is empty, the following error will be returned.</li>
</ul>

<pre><code>  &quot;ERR12011&quot;: {
    &quot;statusCode&quot;: 400,
    &quot;code&quot;: &quot;ERR12011&quot;,
    &quot;message&quot;: &quot;PASSWORD_OR_PASSWORDCONFIRM_EMPTY&quot;,
    &quot;description&quot;: &quot;Password %s or PasswordConfirm %s is empty.&quot;
  }
</code></pre>

<h2 id="oauth2-user-put">/oauth2/user@put</h2>

<p>This is the endpoint to update existing user. Most of the attributes of users can be
updated through this endpoint except password. You must use password reset endpoint
to update password.</p>

<p>The following validations will be performed before the user will be updated.</p>

<ul>
<li>If userId cannot be found in cache, then the following error will be returned.</li>
</ul>

<pre><code>  &quot;ERR12013&quot;: {
    &quot;statusCode&quot;: 404,
    &quot;code&quot;: &quot;ERR12013&quot;,
    &quot;message&quot;: &quot;USER_NOT_FOUND&quot;,
    &quot;description&quot;: &quot;User %s is not found.&quot;
  }
</code></pre>

<h2 id="oauth2-user-userid-delete">/oauth2/user/{userId}@delete</h2>

<p>This endpoint is used to delete an existing user. It removes the user physically so
be careful when calling this endpoint. On the user interface, please make sure the
operator confirms the action before submitting the request to the service.</p>

<p>Before the user is deleted, the following validation will be performed.</p>

<ul>
<li>If userId doesn&rsquo;t exist in memory, then the following error will be returned.</li>
</ul>

<pre><code>  &quot;ERR12013&quot;: {
    &quot;statusCode&quot;: 404,
    &quot;code&quot;: &quot;ERR12013&quot;,
    &quot;message&quot;: &quot;USER_NOT_FOUND&quot;,
    &quot;description&quot;: &quot;User %s is not found.&quot;
  }
</code></pre>

<h2 id="oauth2-user-userid-get">/oauth2/user/{userId}get</h2>

<p>This is the endpoint to get a particular user with userId. The server will perform
the following validations before the user object is returned to the consumer.</p>

<ul>
<li>If userId doesn&rsquo;t exist in cache, then the following error will be returned.</li>
</ul>

<pre><code>  &quot;ERR12013&quot;: {
    &quot;statusCode&quot;: 404,
    &quot;code&quot;: &quot;ERR12013&quot;,
    &quot;message&quot;: &quot;USER_NOT_FOUND&quot;,
    &quot;description&quot;: &quot;User %s is not found.&quot;
  }
</code></pre>


			<aside class="copyright" role="note">
				
				&copy; 2017 Released under the MIT license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://networknt.github.io/light-oauth2/services/key/" title="Key Distribution">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Key Distribution
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://networknt.github.io/light-oauth2/services/client/" title="Client Registration">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Client Registration
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/networknt.github.io\/light-oauth2\/';
      var repo_id  = 'networknt\/light-oauth2';
    
    </script>

    <script src="https://networknt.github.io/light-oauth2/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>


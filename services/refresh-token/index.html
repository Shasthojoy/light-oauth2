<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Refresh Token - Light OAuth2 - OAuth2 Serivces based on light-4j</title>
    <meta name="generator" content="Hugo 0.20.6" />

    
    <meta name="description" content="Light OAuth2 Docs">
    
    <link rel="canonical" href="https://networknt.github.io/light-oauth2/services/refresh-token/">
    
    <meta name="author" content="Steve Hu">
    

    <meta property="og:url" content="https://networknt.github.io/light-oauth2/services/refresh-token/">
    <meta property="og:title" content="Light OAuth2 - OAuth2 Serivces based on light-4j">
    <meta property="og:image" content="https://networknt.github.io/light-oauth2/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Light OAuth2 - OAuth2 Serivces based on light-4j">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://networknt.github.io/light-oauth2/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://networknt.github.io/light-oauth2/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://networknt.github.io/light-oauth2/fonts/icon.eot');
        src: url('https://networknt.github.io/light-oauth2/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://networknt.github.io/light-oauth2/fonts/icon.woff')
               format('woff'),
             url('https://networknt.github.io/light-oauth2/fonts/icon.ttf')
               format('truetype'),
             url('https://networknt.github.io/light-oauth2/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://networknt.github.io/light-oauth2/stylesheets/application.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-oauth2/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-oauth2/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-oauth2/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://networknt.github.io/light-oauth2/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-red palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Refresh Token
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/stevehu" title="@stevehu on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/networknt/light-oauth2" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://networknt.github.io/light-oauth2/images/logo.png">
        </div>
      
      <div class="name">
        <strong>Light OAuth2 - OAuth2 Serivces based on light-4j <span class="version">1.4.3</span></strong>
        
          <br>
          networknt/light-oauth2
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/networknt/light-oauth2/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/networknt/light-oauth2/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Getting started" href="https://networknt.github.io/light-oauth2/getting-started/">
	
	Getting started
</a>



  
</li>



<li>
  
    



<a  title="Architecture" href="https://networknt.github.io/light-oauth2/architecture/">
	
	Architecture
</a>



  
</li>



<li>
  
    



<a  title="Services" href="https://networknt.github.io/light-oauth2/services/">
	
	Services
</a>



  
</li>



<li>
  
    



<a  title="Tutorials" href="https://networknt.github.io/light-oauth2/tutorials/">
	
	Tutorials
</a>



  
</li>



<li>
  
    



<a  title="Examples" href="https://networknt.github.io/light-oauth2/example/">
	
	Examples
</a>



  
</li>



<li>
  
    



<a  title="Tools" href="https://networknt.github.io/light-oauth2/tools/">
	
	Tools
</a>



  
</li>



<li>
  
    



<a  title="References" href="https://networknt.github.io/light-oauth2/reference/">
	
	References
</a>



  
</li>



<li>
  
    



<a  title="Issues &amp; Help" href="https://github.com/networknt/light-oauth2/issues">
	
	Issues &amp; Help
</a>



  
</li>



<li>
  
    



<a  title="Roadmap" href="https://networknt.github.io/light-oauth2/roadmap/">
	
	Roadmap
</a>



  
</li>



<li>
  
    



<a  title="License" href="https://www.apache.org/licenses/LICENSE-2.0">
	
	License
</a>



  
</li>



<li>
  
    



<a  title="Introduction" href="https://networknt.github.io/light-oauth2/index.html">
	
	Introduction
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/stevehu" target="_blank" title="@stevehu on GitHub">
              @stevehu on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:stevehu@gmail.com" title="Email of stevehu@gmail.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Refresh Token </h1>

			

<h1 id="refresh-token">Refresh Token</h1>

<p>Refresh Token is issued in Authorization Code Grant and Resource Owner Password Credentials
Grant along with access token. Also, for maximum security, a refresh token is issued every
time the old refresh token is used to renew an access token.</p>

<p>This service is listening to port number 6886.</p>

<p>Here is the specification</p>

<pre><code>swagger: '2.0'

info:
  version: &quot;1.0.0&quot;
  title: OAuth2 Refresh Token Management
  description: OAuth2 refresh token management microservices endpoints. 
  contact:
    email: stevehu@gmail.com
  license:
    name: &quot;Apache 2.0&quot;
    url: &quot;http://www.apache.org/licenses/LICENSE-2.0.html&quot;
host: oauth2.networknt.com
schemes:
  - http
  - https

consumes:
  - application/json
produces:
  - application/json

paths:
  /oauth2/refresh_token:
    get:
      description: Return all refresh tokens
      operationId: getAllRefreshToken
      parameters:
      - name: &quot;page&quot;
        in: &quot;query&quot;
        description: &quot;Page number&quot;
        required: true
        type: &quot;integer&quot;
        format: &quot;int32&quot;
      - name: &quot;pageSize&quot;
        in: &quot;query&quot;
        description: &quot;Pag size&quot;
        required: false
        type: &quot;integer&quot;
        format: &quot;int32&quot;
      - name: &quot;userId&quot;
        in: &quot;query&quot;
        description: &quot;Partial userId for filter&quot;
        required: false
        type: &quot;string&quot;
      responses:
        200:
          description: &quot;successful operation&quot;
          schema:
            type: &quot;array&quot;
            items:
              $ref: &quot;#/definitions/RefreshToken&quot;
      security:
      - refresh_token_auth:
        - &quot;oauth.refresh_token.r&quot;
          
  /oauth2/refresh_token/{refreshToken}:
    delete:
      description: Delete a refresh token
      operationId: deleteRefreshToken
      parameters:
      - name: &quot;refreshToken&quot;
        in: &quot;path&quot;
        description: &quot;Refresh Token&quot;
        required: true
        type: &quot;string&quot;
      responses:
        400:
          description: &quot;Invalid refresh token supplied&quot;
        404:
          description: &quot;Refresh token not found&quot;
      security:
        - refresh_token_auth:
          - oauth.refresh_token.w
    get:
      description: Get a refresh token
      operationId: getRefreshToken
      parameters:
      - name: &quot;refreshToken&quot;
        in: &quot;path&quot;
        description: &quot;Refresh token&quot;
        required: true
        type: &quot;string&quot;
      responses:
        200: 
          description: Successful response
          schema:
            $ref: &quot;#/definitions/RefreshToken&quot;          
        400:
          description: &quot;Invalid refresh token supplied&quot;
        404:
          description: &quot;Refresh token not found&quot;
      security:
        - refresh_token_auth:
          - oauth.refresh_token.r
          - oauth.refresh_token.w

securityDefinitions:
  refresh_token_auth:
    type: &quot;oauth2&quot;
    authorizationUrl: &quot;http://localhost:8888/oauth2/code&quot;
    flow: &quot;implicit&quot;
    scopes:
      oauth.refresh_token.w: &quot;write oauth refresh token&quot;
      oauth.refresh_token.r: &quot;read oauth refresh token&quot;
definitions:
  RefreshToken:
    type: &quot;object&quot;
    required:
    - &quot;refreshToken&quot;
    - &quot;userId&quot;
    - &quot;clientId&quot;
    properties:
      refreshToken:
        type: &quot;string&quot;
        description: &quot;refresh token&quot;
      userId:
        type: &quot;string&quot;
        description: &quot;user id&quot;
      clientId:
        type: &quot;string&quot;
        description: &quot;client id&quot;
      scope:
        type: &quot;string&quot;
        description: &quot;service scopes separated by space&quot;

</code></pre>

<h2 id="implementation">Implementation</h2>

<h3 id="oauth2-refresh-token-get">/oauth2/refresh_token@get</h3>

<p>This endpoint gets all the issued refresh tokens with filter and sorted on
userId. A page query parameter is mandatory. pageSize and userId filter
are optional.</p>

<ul>
<li>page</li>
</ul>

<p>Page number which must be specified. It starts with 1 and an empty list will
be returned if the page is greater than the last page.</p>

<ul>
<li>pageSize</li>
</ul>

<p>Default pageSize is 10 and you can overwrite it with another number. Please don&rsquo;t
use a big number due to performance reason.</p>

<ul>
<li>userId</li>
</ul>

<p>This is the only filter available and it supports filter by start with a few characters.
For example, &ldquo;userId=abc&rdquo; means any userId starts with &ldquo;abc&rdquo;. The result is also
sorted by userId in the pagination.</p>

<p>The following validation will be performed in the service.</p>

<ul>
<li>If page is missing from the query parameter, an error will be returned.</li>
</ul>

<pre><code>  &quot;ERR11000&quot;: {
    &quot;statusCode&quot;: 400,
    &quot;code&quot;: &quot;ERR11000&quot;,
    &quot;message&quot;: &quot;VALIDATOR_REQUEST_PARAMETER_QUERY_MISSING&quot;,
    &quot;description&quot;: &quot;Query parameter '%s' is required on path '%s' but not found in request.&quot;
  }
</code></pre>

<h3 id="oauth2-refresh-token-refreshtoken-delete">/oauth2/refresh_token/{refreshToken}@delete</h3>

<p>This endpoint is used to revoke a refresh token. It removes the refresh token from
in memory data grid when calling this endpoint. On the user interface, please make
sure the operator confirms the action before submitting the request to the service.</p>

<p>Before the refresh token is deleted, the following validation will be performed.</p>

<ul>
<li>If refresh token doesn&rsquo;t exist in memory, then the following error will be
returned.</li>
</ul>

<pre><code>  &quot;ERR12029&quot;: {
    &quot;statusCode&quot;: 404,
    &quot;code&quot;: &quot;ERR12029&quot;,
    &quot;message&quot;: &quot;REFRESH_TOKEN_NOT_FOUND&quot;,
    &quot;description&quot;: &quot;Refresh token %s is not found.&quot;
  }
</code></pre>

<h3 id="oauth2-refresh-token-refreshtoken">/oauth2/refresh_token/{refreshToken}</h3>

<p>This is the endpoint to get a particular refresh token information. The server
will perform the following validations before the refresh token object is returned
to the consumer.</p>

<ul>
<li>If refresh token doesn&rsquo;t exist in cache, then the following error will be returned.</li>
</ul>

<pre><code>  &quot;ERR12029&quot;: {
    &quot;statusCode&quot;: 404,
    &quot;code&quot;: &quot;ERR12029&quot;,
    &quot;message&quot;: &quot;REFRESH_TOKEN_NOT_FOUND&quot;,
    &quot;description&quot;: &quot;Refresh token %s is not found.&quot;
  }
</code></pre>


			<aside class="copyright" role="note">
				
				&copy; 2017 Released under the MIT license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
  </div>

  <div class="next">
  
      <a href="https://networknt.github.io/light-oauth2/services/key/" title="Key Distribution">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Key Distribution
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/networknt.github.io\/light-oauth2\/';
      var repo_id  = 'networknt\/light-oauth2';
    
    </script>

    <script src="https://networknt.github.io/light-oauth2/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>


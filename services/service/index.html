<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Service Registration - Light OAuth2 - OAuth2 Serivces based on light-4j</title>
    <meta name="generator" content="Hugo 0.20.6" />

    
    <meta name="description" content="Light OAuth2 Docs">
    
    <link rel="canonical" href="https://networknt.github.io/light-oauth2/services/service/">
    
    <meta name="author" content="Steve Hu">
    

    <meta property="og:url" content="https://networknt.github.io/light-oauth2/services/service/">
    <meta property="og:title" content="Light OAuth2 - OAuth2 Serivces based on light-4j">
    <meta property="og:image" content="https://networknt.github.io/light-oauth2/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Light OAuth2 - OAuth2 Serivces based on light-4j">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://networknt.github.io/light-oauth2/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://networknt.github.io/light-oauth2/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://networknt.github.io/light-oauth2/fonts/icon.eot');
        src: url('https://networknt.github.io/light-oauth2/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://networknt.github.io/light-oauth2/fonts/icon.woff')
               format('woff'),
             url('https://networknt.github.io/light-oauth2/fonts/icon.ttf')
               format('truetype'),
             url('https://networknt.github.io/light-oauth2/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://networknt.github.io/light-oauth2/stylesheets/application.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-oauth2/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-oauth2/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-oauth2/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://networknt.github.io/light-oauth2/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-red palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Service Registration
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/stevehu" title="@stevehu on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/networknt/light-oauth2" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://networknt.github.io/light-oauth2/images/logo.png">
        </div>
      
      <div class="name">
        <strong>Light OAuth2 - OAuth2 Serivces based on light-4j <span class="version">1.4.3</span></strong>
        
          <br>
          networknt/light-oauth2
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/networknt/light-oauth2/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/networknt/light-oauth2/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Getting started" href="https://networknt.github.io/light-oauth2/getting-started/">
	
	Getting started
</a>



  
</li>



<li>
  
    



<a  title="Architecture" href="https://networknt.github.io/light-oauth2/architecture/">
	
	Architecture
</a>



  
</li>



<li>
  
    



<a  title="Services" href="https://networknt.github.io/light-oauth2/services/">
	
	Services
</a>



  
</li>



<li>
  
    



<a  title="Tutorials" href="https://networknt.github.io/light-oauth2/tutorials/">
	
	Tutorials
</a>



  
</li>



<li>
  
    



<a  title="Examples" href="https://networknt.github.io/light-oauth2/example/">
	
	Examples
</a>



  
</li>



<li>
  
    



<a  title="Tools" href="https://networknt.github.io/light-oauth2/tools/">
	
	Tools
</a>



  
</li>



<li>
  
    



<a  title="References" href="https://networknt.github.io/light-oauth2/reference/">
	
	References
</a>



  
</li>



<li>
  
    



<a  title="Issues &amp; Help" href="https://github.com/networknt/light-oauth2/issues">
	
	Issues &amp; Help
</a>



  
</li>



<li>
  
    



<a  title="Roadmap" href="https://networknt.github.io/light-oauth2/roadmap/">
	
	Roadmap
</a>



  
</li>



<li>
  
    



<a  title="License" href="https://www.apache.org/licenses/LICENSE-2.0">
	
	License
</a>



  
</li>



<li>
  
    



<a  title="Introduction" href="https://networknt.github.io/light-oauth2/index.html">
	
	Introduction
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/stevehu" target="_blank" title="@stevehu on GitHub">
              @stevehu on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:stevehu@gmail.com" title="Email of stevehu@gmail.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Service Registration </h1>

			

<h1 id="service">Service</h1>

<p>Every micro service or API needs to register itself to OAuth2 server in order to control who
can access it. During the registration/on-boarding, a list of scopes defined in the OpenAPI
specification should be populated as well. This list of scopes will be used for client to
register scopes in order to access this particular service or API.</p>

<p>This service has several endpoints and listening to port 6883.</p>

<p>Here is the specification.</p>

<pre><code>swagger: '2.0'

info:
  version: &quot;1.0.0&quot;
  title: OAuth2 Service Registration
  description: OAuth2 Service Registration microservices endpoints. 
  contact:
    email: stevehu@gmail.com
  license:
    name: &quot;Apache 2.0&quot;
    url: &quot;http://www.apache.org/licenses/LICENSE-2.0.html&quot;
host: oauth2.networknt.com
schemes:
  - http
  - https

consumes:
  - application/json
produces:
  - application/json

paths:
  /oauth2/service:
    post:
      description: Return a service object
      operationId: createService
      parameters:
      - in: &quot;body&quot;
        name: &quot;body&quot;
        description: &quot;Service object that needs to be added&quot;
        required: true
        schema:
          $ref: &quot;#/definitions/Service&quot;      
      responses:
        200:
          description: Successful response
          schema:
            $ref: &quot;#/definitions/Service&quot;          
      security:
      - service_auth:
        - &quot;oauth.service.w&quot;
    put:
      description: Return the updated service
      operationId: updateService
      parameters:
      - in: &quot;body&quot;
        name: &quot;body&quot;
        description: &quot;Service object that needs to be added&quot;
        required: true
        schema:
          $ref: &quot;#/definitions/Service&quot;      
      responses:
        200:
          description: Successful response
          schema:
            $ref: &quot;#/definitions/Service&quot;          
      security:
      - service_auth:
        - &quot;oauth.service.w&quot;
    get:
      description: Return all services
      operationId: getAllService
      parameters:
      - name: &quot;page&quot;
        in: &quot;query&quot;
        description: &quot;Page number&quot;
        required: true
        type: &quot;integer&quot;
        format: &quot;int32&quot;
      - name: &quot;pageSize&quot;
        in: &quot;query&quot;
        description: &quot;Pag size&quot;
        required: false
        type: &quot;integer&quot;
        format: &quot;int32&quot;
      - name: &quot;serviceId&quot;
        in: &quot;query&quot;
        description: &quot;Partial serviceId for filter&quot;
        required: false
        type: &quot;string&quot;
      responses:
        200:
          description: &quot;successful operation&quot;
          schema:
            type: &quot;array&quot;
            items:
              $ref: &quot;#/definitions/Service&quot;
      security:
      - service_auth:
        - &quot;oauth.service.r&quot;
          
  /oauth2/service/{serviceId}:
    delete:
      description: Delete a service by Id
      operationId: deleteService
      parameters:
      - name: &quot;serviceId&quot;
        in: &quot;path&quot;
        description: &quot;Service Id&quot;
        required: true
        type: &quot;string&quot;
      responses:
        400:
          description: &quot;Invalid serviceId supplied&quot;
        404:
          description: &quot;Service not found&quot;
      security:
        - service_auth:
          - oauth.service.w
    get:
      description: Get a service by Id
      operationId: getService
      parameters:
      - name: &quot;serviceId&quot;
        in: &quot;path&quot;
        description: &quot;Service Id&quot;
        required: true
        type: &quot;string&quot;
      responses:
        200: 
          description: Successful response
          schema:
            $ref: &quot;#/definitions/Service&quot;          
        400:
          description: &quot;Invalid serviceId supplied&quot;
        404:
          description: &quot;Service not found&quot;
      security:
        - service_auth:
          - oauth.service.r
          - oauth.service.w

securityDefinitions:
  service_auth:
    type: &quot;oauth2&quot;
    authorizationUrl: &quot;http://localhost:8888/oauth2/code&quot;
    flow: &quot;implicit&quot;
    scopes:
      oauth.service.w: &quot;write oauth service&quot;
      oauth.service.r: &quot;read oauth service&quot;
definitions:
  Service:
    type: &quot;object&quot;
    required:
    - &quot;serviceId&quot;
    - &quot;serviceName&quot;
    - &quot;serviceType&quot;
    - &quot;scope&quot;
    properties:
      serviceId:
        type: &quot;string&quot;
        description: &quot;a unique service id&quot;
      serviceType:
        type: &quot;string&quot;
        description: &quot;service type&quot;
        enum:
        - &quot;ms&quot;
        - &quot;api&quot;
      serviceName:
        type: &quot;string&quot;
        description: &quot;service name&quot;
      serviceDesc:
        type: &quot;string&quot;
        description: &quot;service description&quot;
      ownerId:
        type: &quot;string&quot;
        description: &quot;service owner userId&quot;
      scope:
        type: &quot;string&quot;
        description: &quot;service scopes separated by space&quot;
      createDt:
        type: &quot;string&quot;
        format: &quot;date-time&quot;
        description: &quot;create date time&quot;
      updateDt:
        type: &quot;string&quot;
        format: &quot;date-time&quot;
        description: &quot;update date time&quot;
        

</code></pre>

<h2 id="oauth2-service-get">/oauth2/service@get</h2>

<p>This endpoint gets all the services from service with filter and sorted on
serviceId. A page query parameter is mandatory and pageSize and serviceId filter
are optional.</p>

<ul>
<li>page</li>
</ul>

<p>Page number which must be specified. It starts with 1 and an empty list will
be returned if the page is greater than the last page.</p>

<ul>
<li>pageSize</li>
</ul>

<p>Default pageSize is 10 and you can overwrite it with another number. Please don&rsquo;t
use a big number due to performance reason.</p>

<ul>
<li>serviceId</li>
</ul>

<p>This is the only filter available and it supports filter by start with a few characters.
For example, &ldquo;serviceId=abc&rdquo; means any serviceId starts with &ldquo;abc&rdquo;. The result is also
sorted by serviceId in the pagination.</p>

<p>The following validation will be performed in the service.</p>

<ul>
<li>If page is missing from the query parameter, an error will be returned.</li>
</ul>

<pre><code>  &quot;ERR11000&quot;: {
    &quot;statusCode&quot;: 400,
    &quot;code&quot;: &quot;ERR11000&quot;,
    &quot;message&quot;: &quot;VALIDATOR_REQUEST_PARAMETER_QUERY_MISSING&quot;,
    &quot;description&quot;: &quot;Query parameter '%s' is required on path '%s' but not found in request.&quot;
  }
</code></pre>

<h2 id="oauth2-service-post">/oauth2/service@post</h2>

<p>This endpoint is used to create a new service. The following validation will be performed
before a new service is created.</p>

<ul>
<li>If serviceId exists in the cache, then the following error will be returned.</li>
</ul>

<pre><code>  &quot;ERR12018&quot;: {
    &quot;statusCode&quot;: 400,
    &quot;code&quot;: &quot;ERR12018&quot;,
    &quot;message&quot;: &quot;SERVICE_ID_EXISTS&quot;,
    &quot;description&quot;: &quot;Service id %s exists.&quot;
  }
</code></pre>

<ul>
<li>If ownerId doesn&rsquo;t exist in user cache, then the following error will be returned.</li>
</ul>

<pre><code>  &quot;ERR12013&quot;: {
    &quot;statusCode&quot;: 404,
    &quot;code&quot;: &quot;ERR12013&quot;,
    &quot;message&quot;: &quot;USER_NOT_FOUND&quot;,
    &quot;description&quot;: &quot;User %s is not found.&quot;
  }
</code></pre>

<h2 id="oauth2-service-put">/oauth2/service@put</h2>

<p>This is the endpoint to update existing service. Before service is updated, the
following validation will be performed.</p>

<ul>
<li>If serviceId cannot be found in the service cache, then the following error will be
returned.</li>
</ul>

<pre><code>  &quot;ERR12015&quot;: {
    &quot;statusCode&quot;: 404,
    &quot;code&quot;: &quot;ERR12015&quot;,
    &quot;message&quot;: &quot;SERVICE_NOT_FOUND&quot;,
    &quot;description&quot;: &quot;Service %s is not found.&quot;
  }
</code></pre>

<ul>
<li>If ownerId doesn&rsquo;t exist in user cache, then the following error will be returned.</li>
</ul>

<pre><code>  &quot;ERR12013&quot;: {
    &quot;statusCode&quot;: 404,
    &quot;code&quot;: &quot;ERR12013&quot;,
    &quot;message&quot;: &quot;USER_NOT_FOUND&quot;,
    &quot;description&quot;: &quot;User %s is not found.&quot;
  }
</code></pre>

<h2 id="oauth2-service-serviceid-delete">/oauth2/service/{serviceId}@delete</h2>

<p>This endpoint is used to delete existing service. Before the service is deleted,
the following validations will be performed.</p>

<ul>
<li>If serviceId cannot be found in the service cache, then the following error will be
returned.</li>
</ul>

<pre><code>  &quot;ERR12015&quot;: {
    &quot;statusCode&quot;: 404,
    &quot;code&quot;: &quot;ERR12015&quot;,
    &quot;message&quot;: &quot;SERVICE_NOT_FOUND&quot;,
    &quot;description&quot;: &quot;Service %s is not found.&quot;
  }
</code></pre>

<h2 id="oauth2-service-serviceid-get">/oauth2/service/{serviceId}@get</h2>

<p>This endpoint is used to get a particular service by serviceId. Before the service is
returned, the following validation will be performed.</p>

<ul>
<li>If serviceId cannot be found in the service cache, then the following error will be
returned.</li>
</ul>

<pre><code>  &quot;ERR12015&quot;: {
    &quot;statusCode&quot;: 404,
    &quot;code&quot;: &quot;ERR12015&quot;,
    &quot;message&quot;: &quot;SERVICE_NOT_FOUND&quot;,
    &quot;description&quot;: &quot;Service %s is not found.&quot;
  }
</code></pre>


			<aside class="copyright" role="note">
				
				&copy; 2017 Released under the MIT license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://networknt.github.io/light-oauth2/services/client/" title="Client Registration">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Client Registration
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://networknt.github.io/light-oauth2/services/token/" title="Token Endpoint">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Token Endpoint
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/networknt.github.io\/light-oauth2\/';
      var repo_id  = 'networknt\/light-oauth2';
    
    </script>

    <script src="https://networknt.github.io/light-oauth2/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

